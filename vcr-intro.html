<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Caching HTTP requests | HTTP mocking and testing in R</title>
  <meta name="description" content="http testing book" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Caching HTTP requests | HTTP mocking and testing in R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="http testing book" />
  <meta name="github-repo" content="ropensci-books/http-testing" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Caching HTTP requests | HTTP mocking and testing in R" />
  
  <meta name="twitter:description" content="http testing book" />
  

<meta name="author" content="built with vcr v0.5.4 / webmockr v0.6.2 / crul v0.9.0 / curl v4.3" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="webmockr-utilities.html"/>
<link rel="next" href="vcr-usage.html"/>
<script src="libs/header-attrs-2.3/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">HTTP mocking and testing in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preamble</a></li>
<li class="part"><span><b>I introduction</b></span></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#what-webmockr"><i class="fa fa-check"></i><b>2.1</b> What is webmockr?</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#what-vcr"><i class="fa fa-check"></i><b>2.2</b> What is vcr?</a></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#why-crul"><i class="fa fa-check"></i><b>2.3</b> Why crul?</a></li>
<li class="chapter" data-level="2.4" data-path="intro.html"><a href="intro.html#use-cases"><i class="fa fa-check"></i><b>2.4</b> Use cases</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="intro.html"><a href="intro.html#use-cases-mocking"><i class="fa fa-check"></i><b>2.4.1</b> mocking use cases</a></li>
<li class="chapter" data-level="2.4.2" data-path="intro.html"><a href="intro.html#use-cases-caching"><i class="fa fa-check"></i><b>2.4.2</b> caching use cases</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II webmockr</b></span></li>
<li class="chapter" data-level="3" data-path="mocking.html"><a href="mocking.html"><i class="fa fa-check"></i><b>3</b> Mocking HTTP Requests</a>
<ul>
<li class="chapter" data-level="3.1" data-path="mocking.html"><a href="mocking.html#webmockr-pkgdown"><i class="fa fa-check"></i><b>3.1</b> Package documentation</a></li>
<li class="chapter" data-level="3.2" data-path="mocking.html"><a href="mocking.html#webmockr-features"><i class="fa fa-check"></i><b>3.2</b> Features</a></li>
<li class="chapter" data-level="3.3" data-path="mocking.html"><a href="mocking.html#webmockr-detail"><i class="fa fa-check"></i><b>3.3</b> How webmockr works in detail</a></li>
<li class="chapter" data-level="3.4" data-path="mocking.html"><a href="mocking.html#webmockr-basic-usage"><i class="fa fa-check"></i><b>3.4</b> Basic usage</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="webmockr-stubs.html"><a href="webmockr-stubs.html"><i class="fa fa-check"></i><b>4</b> stubs</a>
<ul>
<li class="chapter" data-level="4.1" data-path="webmockr-stubs.html"><a href="webmockr-stubs.html#webmockr-disk"><i class="fa fa-check"></i><b>4.1</b> Writing to disk</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="webmockr-testing.html"><a href="webmockr-testing.html"><i class="fa fa-check"></i><b>5</b> testing</a></li>
<li class="chapter" data-level="6" data-path="webmockr-utilities.html"><a href="webmockr-utilities.html"><i class="fa fa-check"></i><b>6</b> utilities</a>
<ul>
<li class="chapter" data-level="6.1" data-path="webmockr-utilities.html"><a href="webmockr-utilities.html#webmockr-"><i class="fa fa-check"></i><b>6.1</b> Managing stubs</a></li>
<li class="chapter" data-level="6.2" data-path="webmockr-utilities.html"><a href="webmockr-utilities.html#webmockr-managing-stubs"><i class="fa fa-check"></i><b>6.2</b> Managing stubs</a></li>
<li class="chapter" data-level="6.3" data-path="webmockr-utilities.html"><a href="webmockr-utilities.html#webmockr-managing-requests"><i class="fa fa-check"></i><b>6.3</b> Managing requests</a></li>
</ul></li>
<li class="part"><span><b>III vcr</b></span></li>
<li class="chapter" data-level="7" data-path="vcr-intro.html"><a href="vcr-intro.html"><i class="fa fa-check"></i><b>7</b> Caching HTTP requests</a>
<ul>
<li class="chapter" data-level="7.1" data-path="vcr-intro.html"><a href="vcr-intro.html#vcr-pkgdown"><i class="fa fa-check"></i><b>7.1</b> Package documentation</a></li>
<li class="chapter" data-level="7.2" data-path="vcr-intro.html"><a href="vcr-intro.html#terminology"><i class="fa fa-check"></i><b>7.2</b> Terminology</a></li>
<li class="chapter" data-level="7.3" data-path="vcr-intro.html"><a href="vcr-intro.html#vcr-basic-usage"><i class="fa fa-check"></i><b>7.3</b> Basic usage</a></li>
<li class="chapter" data-level="7.4" data-path="vcr-intro.html"><a href="vcr-intro.html#vcr-enabled-testing"><i class="fa fa-check"></i><b>7.4</b> vcr enabled testing</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="vcr-intro.html"><a href="vcr-intro.html#check-vs-test"><i class="fa fa-check"></i><b>7.4.1</b> check vs.Â test</a></li>
<li class="chapter" data-level="7.4.2" data-path="vcr-intro.html"><a href="vcr-intro.html#vcr-enabled-tests-on-cran"><i class="fa fa-check"></i><b>7.4.2</b> CRAN</a></li>
<li class="chapter" data-level="7.4.3" data-path="vcr-intro.html"><a href="vcr-intro.html#vcr-ci"><i class="fa fa-check"></i><b>7.4.3</b> CI sites: Travis, Appveyor, etc.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="vcr-usage.html"><a href="vcr-usage.html"><i class="fa fa-check"></i><b>8</b> vcr usage</a>
<ul>
<li class="chapter" data-level="8.1" data-path="vcr-usage.html"><a href="vcr-usage.html#vcr-disk"><i class="fa fa-check"></i><b>8.1</b> Mocking writing to disk</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="vcr-configuration.html"><a href="vcr-configuration.html"><i class="fa fa-check"></i><b>9</b> vcr configuration</a>
<ul>
<li class="chapter" data-level="9.1" data-path="vcr-configuration.html"><a href="vcr-configuration.html#get-your-configuration"><i class="fa fa-check"></i><b>9.1</b> Get your configuration</a></li>
<li class="chapter" data-level="9.2" data-path="vcr-configuration.html"><a href="vcr-configuration.html#set-configuration-variables"><i class="fa fa-check"></i><b>9.2</b> Set configuration variables</a></li>
<li class="chapter" data-level="9.3" data-path="vcr-configuration.html"><a href="vcr-configuration.html#config-reset"><i class="fa fa-check"></i><b>9.3</b> Re-set to defaults</a></li>
<li class="chapter" data-level="9.4" data-path="vcr-configuration.html"><a href="vcr-configuration.html#config-dir"><i class="fa fa-check"></i><b>9.4</b> dir - directory of where cassettes are stored</a></li>
<li class="chapter" data-level="9.5" data-path="vcr-configuration.html"><a href="vcr-configuration.html#config-record-mode"><i class="fa fa-check"></i><b>9.5</b> record - record mode</a></li>
<li class="chapter" data-level="9.6" data-path="vcr-configuration.html"><a href="vcr-configuration.html#config-match-on"><i class="fa fa-check"></i><b>9.6</b> match_requests_on - customize how vcr matches requests</a></li>
<li class="chapter" data-level="9.7" data-path="vcr-configuration.html"><a href="vcr-configuration.html#config-allow-unused"><i class="fa fa-check"></i><b>9.7</b> allow_unused_http_interactions - Allow HTTP connections when no cassette</a></li>
<li class="chapter" data-level="9.8" data-path="vcr-configuration.html"><a href="vcr-configuration.html#config-serialize-with"><i class="fa fa-check"></i><b>9.8</b> serialize_with - which serializer to use</a></li>
<li class="chapter" data-level="9.9" data-path="vcr-configuration.html"><a href="vcr-configuration.html#config-persist-with"><i class="fa fa-check"></i><b>9.9</b> persist_with - which persister to use</a></li>
<li class="chapter" data-level="9.10" data-path="vcr-configuration.html"><a href="vcr-configuration.html#config-ignore-requests"><i class="fa fa-check"></i><b>9.10</b> ignore requests</a>
<ul>
<li class="chapter" data-level="9.10.1" data-path="vcr-configuration.html"><a href="vcr-configuration.html#ignore_hosts---specify-particular-hosts-to-ignore"><i class="fa fa-check"></i><b>9.10.1</b> ignore_hosts - specify particular hosts to ignore</a></li>
<li class="chapter" data-level="9.10.2" data-path="vcr-configuration.html"><a href="vcr-configuration.html#ignore_localhost---ignore-all-localhost-flavors"><i class="fa fa-check"></i><b>9.10.2</b> ignore_localhost - ignore all localhost flavors</a></li>
<li class="chapter" data-level="9.10.3" data-path="vcr-configuration.html"><a href="vcr-configuration.html#ignore_request---ignore-any-request-for-which-function-is-true"><i class="fa fa-check"></i><b>9.10.3</b> ignore_request - ignore any request for which function is true</a></li>
</ul></li>
<li class="chapter" data-level="9.11" data-path="vcr-configuration.html"><a href="vcr-configuration.html#config-uri-parser"><i class="fa fa-check"></i><b>9.11</b> uri_parser - which uri parser to use</a></li>
<li class="chapter" data-level="9.12" data-path="vcr-configuration.html"><a href="vcr-configuration.html#config-preserve-exact-body-bytes"><i class="fa fa-check"></i><b>9.12</b> preserve_exact_body_bytes</a></li>
<li class="chapter" data-level="9.13" data-path="vcr-configuration.html"><a href="vcr-configuration.html#allow-http-connections-when-no-cassette"><i class="fa fa-check"></i><b>9.13</b> allow_http_connections_when_no_cassette</a></li>
<li class="chapter" data-level="9.14" data-path="vcr-configuration.html"><a href="vcr-configuration.html#write-disk-path"><i class="fa fa-check"></i><b>9.14</b> write_disk_path</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="record-modes.html"><a href="record-modes.html"><i class="fa fa-check"></i><b>10</b> record modes</a>
<ul>
<li class="chapter" data-level="10.1" data-path="record-modes.html"><a href="record-modes.html#once"><i class="fa fa-check"></i><b>10.1</b> once</a></li>
<li class="chapter" data-level="10.2" data-path="record-modes.html"><a href="record-modes.html#none"><i class="fa fa-check"></i><b>10.2</b> none</a></li>
<li class="chapter" data-level="10.3" data-path="record-modes.html"><a href="record-modes.html#new_episodes"><i class="fa fa-check"></i><b>10.3</b> new_episodes</a></li>
<li class="chapter" data-level="10.4" data-path="record-modes.html"><a href="record-modes.html#all"><i class="fa fa-check"></i><b>10.4</b> all</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="request-matching.html"><a href="request-matching.html"><i class="fa fa-check"></i><b>11</b> request matching</a>
<ul>
<li class="chapter" data-level="11.1" data-path="request-matching.html"><a href="request-matching.html#matching-on-method"><i class="fa fa-check"></i><b>11.1</b> matching on method</a></li>
<li class="chapter" data-level="11.2" data-path="request-matching.html"><a href="request-matching.html#matching-on-uri"><i class="fa fa-check"></i><b>11.2</b> matching on uri</a></li>
<li class="chapter" data-level="11.3" data-path="request-matching.html"><a href="request-matching.html#matching-on-host"><i class="fa fa-check"></i><b>11.3</b> matching on host</a></li>
<li class="chapter" data-level="11.4" data-path="request-matching.html"><a href="request-matching.html#matching-on-path"><i class="fa fa-check"></i><b>11.4</b> matching on path</a></li>
<li class="chapter" data-level="11.5" data-path="request-matching.html"><a href="request-matching.html#matching-on-query-string"><i class="fa fa-check"></i><b>11.5</b> matching on query string</a></li>
<li class="chapter" data-level="11.6" data-path="request-matching.html"><a href="request-matching.html#matching-on-body"><i class="fa fa-check"></i><b>11.6</b> matching on body</a></li>
<li class="chapter" data-level="11.7" data-path="request-matching.html"><a href="request-matching.html#matching-on-headers"><i class="fa fa-check"></i><b>11.7</b> matching on headers</a></li>
<li class="chapter" data-level="11.8" data-path="request-matching.html"><a href="request-matching.html#playback-repeats"><i class="fa fa-check"></i><b>11.8</b> Playback repeats</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="logging.html"><a href="logging.html"><i class="fa fa-check"></i><b>12</b> logging</a>
<ul>
<li class="chapter" data-level="12.1" data-path="logging.html"><a href="logging.html#logging-setup"><i class="fa fa-check"></i><b>12.1</b> Setup logging</a></li>
<li class="chapter" data-level="12.2" data-path="logging.html"><a href="logging.html#the-log-file"><i class="fa fa-check"></i><b>12.2</b> The log file</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="security.html"><a href="security.html"><i class="fa fa-check"></i><b>13</b> security</a>
<ul>
<li class="chapter" data-level="13.1" data-path="security.html"><a href="security.html#api-keys"><i class="fa fa-check"></i><b>13.1</b> API keys and such</a></li>
<li class="chapter" data-level="13.2" data-path="security.html"><a href="security.html#different-api-keys"><i class="fa fa-check"></i><b>13.2</b> API keys and tests run in varied contexts</a></li>
<li class="chapter" data-level="13.3" data-path="security.html"><a href="security.html#other-security"><i class="fa fa-check"></i><b>13.3</b> Other security</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="lightswitch.html"><a href="lightswitch.html"><i class="fa fa-check"></i><b>14</b> Turning vcr on &amp; off</a>
<ul>
<li class="chapter" data-level="14.1" data-path="lightswitch.html"><a href="lightswitch.html#turned-off"><i class="fa fa-check"></i><b>14.1</b> turned_off</a></li>
<li class="chapter" data-level="14.2" data-path="lightswitch.html"><a href="lightswitch.html#turn-off-on"><i class="fa fa-check"></i><b>14.2</b> turn_off/turn_on</a></li>
<li class="chapter" data-level="14.3" data-path="lightswitch.html"><a href="lightswitch.html#turned-on"><i class="fa fa-check"></i><b>14.3</b> turned_on</a></li>
<li class="chapter" data-level="14.4" data-path="lightswitch.html"><a href="lightswitch.html#lightswitch-env-vars"><i class="fa fa-check"></i><b>14.4</b> Environment variables</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="managing-cassettes.html"><a href="managing-cassettes.html"><i class="fa fa-check"></i><b>15</b> managing cassettes</a>
<ul>
<li class="chapter" data-level="15.1" data-path="managing-cassettes.html"><a href="managing-cassettes.html#gitignore-cassettes"><i class="fa fa-check"></i><b>15.1</b> gitignore cassettes</a></li>
<li class="chapter" data-level="15.2" data-path="managing-cassettes.html"><a href="managing-cassettes.html#rbuildignore-cassettes"><i class="fa fa-check"></i><b>15.2</b> Rbuildignore cassettes</a></li>
<li class="chapter" data-level="15.3" data-path="managing-cassettes.html"><a href="managing-cassettes.html#deleting-cassettes"><i class="fa fa-check"></i><b>15.3</b> deleting cassettes</a></li>
<li class="chapter" data-level="15.4" data-path="managing-cassettes.html"><a href="managing-cassettes.html#cassette-file-types"><i class="fa fa-check"></i><b>15.4</b> cassette file types</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="gotchas.html"><a href="gotchas.html"><i class="fa fa-check"></i><b>16</b> gotchas</a>
<ul>
<li class="chapter" data-level="16.1" data-path="gotchas.html"><a href="gotchas.html#line-identification"><i class="fa fa-check"></i><b>16.1</b> Correct line identification</a></li>
</ul></li>
<li class="part"><span><b>IV Appendix</b></span></li>
<li class="chapter" data-level="17" data-path="testing-considerations.html"><a href="testing-considerations.html"><i class="fa fa-check"></i><b>17</b> Testing considerations</a></li>
<li class="chapter" data-level="18" data-path="session-info.html"><a href="session-info.html"><i class="fa fa-check"></i><b>18</b> session info</a></li>
<li class="divider"></li>
<li><a href="https://github.com/ropensci-books/http-testing" target="blank">(c) Scott Chamberlain, 2020</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">HTTP mocking and testing in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="vcr-intro" class="section level1" number="7">
<h1><span class="header-section-number">Chapter 7</span> Caching HTTP requests</h1>
<p>Record HTTP calls and replay them</p>
<div id="vcr-pkgdown" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Package documentation</h2>
<p>Check out <a href="https://docs.ropensci.org/vcr/" class="uri">https://docs.ropensci.org/vcr/</a> for documentation on <code>vcr</code> functions.</p>
</div>
<div id="terminology" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> Terminology</h2>
<ul>
<li><strong>http</strong>: <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">hyptertext transfer protocol</a></li>
<li><strong>vcr</strong>: the name comes from the idea that we want to record something and play it back later, like a <a href="https://en.wikipedia.org/wiki/Videocassette_recorder">VCR</a></li>
<li><strong>cassette</strong>: A <em>thing</em> to record HTTP interactions to. Right now the only option is file system, but in the future could be other things, e.g.Â a key-value store like <a href="https://redis.io/">Redis</a></li>
<li><strong>Persister</strong>: defines how to save requests - currently only option is the file system</li>
<li><strong>Serializers</strong>: defines how to serialize the HTTP response; that is, how the data is stored on whatever the persister is (right now only file system). Currently only option is YAML; other options in the future could include e.g.Â JSON</li>
<li><strong>insert cassette</strong>: create a cassette (all HTTP interactions will be recorded to this cassette). once a cassette is inserted, we donât allow insertion of additional cassettes</li>
<li><strong>eject cassette</strong>: eject the cassette (no longer recording to that cassette). however, if any interactions were written to disk, those are still stored there</li>
<li><strong>replay</strong>: refers to using a cached result of an http request that was recorded earlier</li>
<li><strong>recording</strong>: this means youâve set vcr in a mode in which we can record HTTP interactions. sometimes recording can be not possible given user configuration or otherwise</li>
</ul>
</div>
<div id="vcr-basic-usage" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> Basic usage</h2>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="vcr-intro.html#cb34-1"></a><span class="kw">library</span>(vcr)</span>
<span id="cb34-2"><a href="vcr-intro.html#cb34-2"></a><span class="kw">library</span>(crul)</span>
<span id="cb34-3"><a href="vcr-intro.html#cb34-3"></a></span>
<span id="cb34-4"><a href="vcr-intro.html#cb34-4"></a>cli &lt;-<span class="st"> </span>crul<span class="op">::</span>HttpClient<span class="op">$</span><span class="kw">new</span>(<span class="dt">url =</span> <span class="st">&quot;https://api.crossref.org&quot;</span>)</span>
<span id="cb34-5"><a href="vcr-intro.html#cb34-5"></a><span class="kw">system.time</span>(</span>
<span id="cb34-6"><a href="vcr-intro.html#cb34-6"></a>  <span class="kw">use_cassette</span>(<span class="dt">name =</span> <span class="st">&quot;helloworld&quot;</span>, {</span>
<span id="cb34-7"><a href="vcr-intro.html#cb34-7"></a>    cli<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;works&quot;</span>, <span class="dt">query =</span> <span class="kw">list</span>(<span class="dt">rows =</span> <span class="dv">3</span>))</span>
<span id="cb34-8"><a href="vcr-intro.html#cb34-8"></a>  })</span>
<span id="cb34-9"><a href="vcr-intro.html#cb34-9"></a>)</span>
<span id="cb34-10"><a href="vcr-intro.html#cb34-10"></a><span class="co">#&gt;    user  system elapsed </span></span>
<span id="cb34-11"><a href="vcr-intro.html#cb34-11"></a><span class="co">#&gt;   0.122   0.011   1.559</span></span></code></pre></div>
<p>The request gets recorded, and all subsequent requests of the same form used the cached HTTP response, and so are much faster</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="vcr-intro.html#cb35-1"></a><span class="kw">system.time</span>(</span>
<span id="cb35-2"><a href="vcr-intro.html#cb35-2"></a>  <span class="kw">use_cassette</span>(<span class="dt">name =</span> <span class="st">&quot;helloworld&quot;</span>, {</span>
<span id="cb35-3"><a href="vcr-intro.html#cb35-3"></a>    cli<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;works&quot;</span>, <span class="dt">query =</span> <span class="kw">list</span>(<span class="dt">rows =</span> <span class="dv">3</span>))</span>
<span id="cb35-4"><a href="vcr-intro.html#cb35-4"></a>  })</span>
<span id="cb35-5"><a href="vcr-intro.html#cb35-5"></a>)</span>
<span id="cb35-6"><a href="vcr-intro.html#cb35-6"></a><span class="co">#&gt;    user  system elapsed </span></span>
<span id="cb35-7"><a href="vcr-intro.html#cb35-7"></a><span class="co">#&gt;   0.102   0.004   0.115</span></span></code></pre></div>
<p>Importantly, your unit test deals with the same inputs and the same outputs - but behind the scenes you use a cached HTTP resonse - thus, your tests run faster.</p>
<p>The cached response looks something like (condensed for brevity):</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb36-1"><a href="vcr-intro.html#cb36-1"></a><span class="fu">http_interactions</span><span class="kw">:</span></span>
<span id="cb36-2"><a href="vcr-intro.html#cb36-2"></a><span class="kw">-</span><span class="at"> </span><span class="fu">request</span><span class="kw">:</span></span>
<span id="cb36-3"><a href="vcr-intro.html#cb36-3"></a><span class="at">    </span><span class="fu">method</span><span class="kw">:</span><span class="at"> get</span></span>
<span id="cb36-4"><a href="vcr-intro.html#cb36-4"></a><span class="at">    </span><span class="fu">uri</span><span class="kw">:</span><span class="at"> https://api.crossref.org/works?rows=3</span></span>
<span id="cb36-5"><a href="vcr-intro.html#cb36-5"></a><span class="at">    </span><span class="fu">body</span><span class="kw">:</span></span>
<span id="cb36-6"><a href="vcr-intro.html#cb36-6"></a><span class="at">      </span><span class="fu">encoding</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;&#39;</span></span>
<span id="cb36-7"><a href="vcr-intro.html#cb36-7"></a><span class="at">      </span><span class="fu">string</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;&#39;</span></span>
<span id="cb36-8"><a href="vcr-intro.html#cb36-8"></a><span class="at">    </span><span class="fu">headers</span><span class="kw">:</span></span>
<span id="cb36-9"><a href="vcr-intro.html#cb36-9"></a><span class="at">      </span><span class="fu">User-Agent</span><span class="kw">:</span><span class="at"> libcurl/7.54.0 r-curl/3.2 crul/0.5.2</span></span>
<span id="cb36-10"><a href="vcr-intro.html#cb36-10"></a><span class="at">      </span><span class="fu">Accept-Encoding</span><span class="kw">:</span><span class="at"> gzip, deflate</span></span>
<span id="cb36-11"><a href="vcr-intro.html#cb36-11"></a><span class="at">      </span><span class="fu">Accept</span><span class="kw">:</span><span class="at"> application/json, text/xml, application/xml, */*</span></span>
<span id="cb36-12"><a href="vcr-intro.html#cb36-12"></a><span class="at">  </span><span class="fu">response</span><span class="kw">:</span></span>
<span id="cb36-13"><a href="vcr-intro.html#cb36-13"></a><span class="at">    </span><span class="fu">status</span><span class="kw">:</span></span>
<span id="cb36-14"><a href="vcr-intro.html#cb36-14"></a><span class="at">      </span><span class="fu">status_code</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;200&#39;</span></span>
<span id="cb36-15"><a href="vcr-intro.html#cb36-15"></a><span class="at">      </span><span class="fu">message</span><span class="kw">:</span><span class="at"> OK</span></span>
<span id="cb36-16"><a href="vcr-intro.html#cb36-16"></a><span class="at">      </span><span class="fu">explanation</span><span class="kw">:</span><span class="at"> Request fulfilled, document follows</span></span>
<span id="cb36-17"><a href="vcr-intro.html#cb36-17"></a><span class="at">    </span><span class="fu">headers</span><span class="kw">:</span></span>
<span id="cb36-18"><a href="vcr-intro.html#cb36-18"></a><span class="at">      </span><span class="fu">status</span><span class="kw">:</span><span class="at"> HTTP/1.1 200 OK</span></span>
<span id="cb36-19"><a href="vcr-intro.html#cb36-19"></a><span class="at">      </span><span class="fu">content-type</span><span class="kw">:</span><span class="at"> application/json;charset=UTF-8</span></span>
<span id="cb36-20"><a href="vcr-intro.html#cb36-20"></a><span class="at">      </span><span class="fu">vary</span><span class="kw">:</span><span class="at"> Accept</span></span>
<span id="cb36-21"><a href="vcr-intro.html#cb36-21"></a><span class="at">      </span><span class="fu">access-control-allow-origin</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;*&#39;</span></span>
<span id="cb36-22"><a href="vcr-intro.html#cb36-22"></a><span class="at">      </span><span class="fu">access-control-allow-headers</span><span class="kw">:</span><span class="at"> X-Requested-With</span></span>
<span id="cb36-23"><a href="vcr-intro.html#cb36-23"></a><span class="at">      </span><span class="fu">content-length</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;5360&#39;</span></span>
<span id="cb36-24"><a href="vcr-intro.html#cb36-24"></a><span class="at">      </span><span class="fu">server</span><span class="kw">:</span><span class="at"> http-kit</span></span>
<span id="cb36-25"><a href="vcr-intro.html#cb36-25"></a><span class="at">      </span><span class="fu">date</span><span class="kw">:</span><span class="at"> Sat, 28 Apr 2018 15:12:29 GMT</span></span>
<span id="cb36-26"><a href="vcr-intro.html#cb36-26"></a><span class="at">      </span><span class="fu">x-rate-limit-limit</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;50&#39;</span></span>
<span id="cb36-27"><a href="vcr-intro.html#cb36-27"></a><span class="at">      </span><span class="fu">x-rate-limit-interval</span><span class="kw">:</span><span class="at"> 1s</span></span>
<span id="cb36-28"><a href="vcr-intro.html#cb36-28"></a><span class="at">      </span><span class="fu">connection</span><span class="kw">:</span><span class="at"> close</span></span>
<span id="cb36-29"><a href="vcr-intro.html#cb36-29"></a><span class="at">    </span><span class="fu">body</span><span class="kw">:</span></span>
<span id="cb36-30"><a href="vcr-intro.html#cb36-30"></a><span class="at">      </span><span class="fu">encoding</span><span class="kw">:</span><span class="at"> UTF-8</span></span>
<span id="cb36-31"><a href="vcr-intro.html#cb36-31"></a><span class="at">      </span><span class="fu">string</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;{&quot;status&quot;:&quot;ok&quot;,&quot;message-type&quot;:&quot;work-list&quot;,&quot;message-version&quot;:&quot;1.0.0&quot;,&quot;message&quot;:{&quot;facets&quot;:{},&quot;total-results&quot;:96454147,&quot;items&quot;:[{&quot;indexed&quot;:{&quot;date-parts&quot;:[[2017,10,23]],&quot;date-time&quot;:&quot;2017-10-23T19:27:25Z&quot;,&quot;timestamp&quot;:1508786845330},&quot;reference-count&quot;:0,&quot;publisher&quot;:&quot;Elsevier</span></span>
<span id="cb36-32"><a href="vcr-intro.html#cb36-32"></a><span class="st">        BV&quot;,&quot;issue&quot;:&quot;3&quot;,&quot;license&quot;:[{&quot;URL&quot;:&quot;http:\/\/www.elsevier.com\/tdm\/userlicense\/1.0\/&quot;,&quot;start&quot;:{&quot;date-parts&quot;:[[1999,10,1]],&quot;date-time&quot;:&quot;1999-10-01T00:00:00Z&quot;,&quot;timestamp&quot;:938736000000},&quot;delay-in-days&quot;:0,&quot;content-version&quot;:&quot;tdm&quot;}],&quot;content-domain&quot;:{&quot;domain&quot;:[],&quot;crossmark-restriction&quot;:false},&quot;short-container-title&quot;:[&quot;Progress</span></span>
<span id="cb36-33"><a href="vcr-intro.html#cb36-33"></a><span class="st">        in Planning&quot;],&quot;published-print&quot;:{&quot;date-parts&quot;:[[1999,10]]},&quot;DOI&quot;:&quot;10.1016\/s0305-9006(99)00007-0&quot;,&quot;type&quot;:&quot;journal-article&quot;,&quot;created&quot;:{&quot;date-parts&quot;:[[2002,7,26]],&quot;date-time&quot;:&quot;2002-07-26T00:11:38Z&quot;,&quot;timestamp&quot;:1027642298000},&quot;page&quot;:&quot;vii&quot;,&quot;source&quot;:&quot;Crossref&quot;,&quot;is-referenced-by-count&quot;:0,&quot;title&quot;:[&quot;Editorial&quot;],&quot;prefix&quot;:&quot;10.1016&quot;,&quot;volume&quot;:&quot;52&quot;,&quot;member&quot;:&quot;78&quot;,&quot;container-title&quot;:[&quot;Progress</span></span>
<span id="cb36-34"><a href="vcr-intro.html#cb36-34"></a><span class="st">        in Planning&quot;],&quot;link&quot;:[{&quot;URL&quot;:&quot;http:\/\/api.elsevier.com\/content\/article\/PII:S0305900699000070?httpAccept=text\/xml&quot;,&quot;content-type&quot;:&quot;text\/xml&quot;,&quot;content-version&quot;:&quot;vor&quot;,&quot;intended-application&quot;:&quot;text-mining&quot;},{&quot;URL&quot;:&quot;http:\/\/api.elsevier.com\/content\/article\/PII:S0305900699000070?httpAccept=text\/plain&quot;,&quot;content-type&quot;:&quot;text\/plain&quot;,&quot;content-version&quot;:&quot;vor&quot;,&quot;intended-application&quot;:&quot;text-mining&quot;}],&quot;deposited&quot;:{&quot;date-parts&quot;:[[2015,9,9]],&quot;date-time&quot;:&quot;2015-09-09T06:07:58Z&quot;,&quot;timestamp&quot;:1441778878000},&quot;score&quot;:1.0,&quot;issued&quot;:{&quot;date-parts&quot;:[[1999,10]]},&quot;references-count&quot;:0,&quot;alternative-id&quot;:[&quot;S0305900699000070&quot;],&quot;URL&quot;:&quot;http:\/\/dx.doi.org\/10.1016\/s0305-9006(99)00007-0&quot;,&quot;ISSN&quot;:[&quot;0305-9006&quot;],&quot;issn-type&quot;:[{&quot;value&quot;:&quot;0305-9006&quot;,&quot;type&quot;:&quot;print&quot;}],&quot;subject&quot;:[&quot;Geography,</span></span>
<span id="cb36-35"><a href="vcr-intro.html#cb36-35"></a><span class="st">        Planning and Development&quot;]},{&quot;indexed&quot;:{&quot;date-parts&quot;:[[2017,10,23]],&quot;date-time&quot;:&quot;2017-10-23T19:27:25Z&quot;,&quot;timestamp&quot;:1508786845347},&quot;reference-count&quot;:0,&quot;publisher&quot;:&quot;Elsevier</span></span>
<span id="cb36-36"><a href="vcr-intro.html#cb36-36"></a><span class="st">        BV&quot;,&quot;issue&quot;:&quot;4&quot;,&quot;license&quot;:[{&quot;URL&quot;:&quot;http:\/\/www.elsevier.com\/tdm\/userlicense\/1.0\/&quot;,&quot;start&quot;:{&quot;date-parts&quot;:[[1998,12,1]],&quot;date-time&quot;:&quot;1998-12-01T00:00:00Z&quot;,&quot;timestamp&quot;:912470400000},&quot;delay-in-days&quot;:0,&quot;content-version&quot;:&quot;tdm&quot;}],&quot;content-domain&quot;:{&quot;domain&quot;:[],&quot;crossmark-restriction&quot;:false},&quot;short-container-title&quot;:[&quot;Progress</span></span>
<span id="cb36-37"><a href="vcr-intro.html#cb36-37"></a><span class="st">        in Planning&quot;],&quot;published-print&quot;:{&quot;date-parts&quot;:[[1998,12]]},&quot;DOI&quot;:&quot;10.1016\/s0305-9006(98)00020-8&quot;,&quot;type&quot;:&quot;journal-article&quot;,&quot;created&quot;:{&quot;date-parts&quot;:[[2002,7,26]],&quot;date-time&quot;:&quot;2002-07-26T00:11:38Z&quot;,&quot;timestamp&quot;:1027642298000},&quot;page&quot;:&quot;VI&quot;,&quot;source&quot;:&quot;Crossref&quot;,&quot;is-referenced-by-count&quot;:0,&quot;title&quot;:[&quot;Preface&quot;],&quot;prefix&quot;:&quot;10.1016&quot;,&quot;volume&quot;:&quot;50&quot;,&quot;author&quot;:[{&quot;given&quot;:&quot;Maurice&quot;,&quot;family&quot;:&quot;Yeats&quot;,&quot;affiliation&quot;:[]}],&quot;member&quot;:&quot;78&quot;,&quot;container-title&quot;:[&quot;Progress</span></span>
<span id="cb36-38"><a href="vcr-intro.html#cb36-38"></a><span class="st">        in Planning&quot;],&quot;link&quot;:[{&quot;URL&quot;:&quot;http:\/\/api.elsevier.com\/content\/article\/PII:S0305900698000208?httpAccept=text\/xml&quot;,&quot;content-type&quot;:&quot;text\/xml&quot;,&quot;content-version&quot;:&quot;vor&quot;,&quot;intended-application&quot;:&quot;text-mining&quot;},{&quot;URL&quot;:&quot;http:\/\/api.elsevier.com\/content\/article\/PII:S0305900698000208?httpAccept=text\/plain&quot;,&quot;content-type&quot;:&quot;text\/plain&quot;,&quot;content-version&quot;:&quot;vor&quot;,&quot;intended-application&quot;:&quot;text-mining&quot;}],&quot;deposited&quot;:{&quot;date-parts&quot;:[[2015,9,9]],&quot;date-time&quot;:&quot;2015-09-09T06:07:58Z&quot;,&quot;timestamp&quot;:1441778878000},&quot;score&quot;:1.0,&quot;issued&quot;:{&quot;date-parts&quot;:[[1998,12]]},&quot;references-count&quot;:0,&quot;alternative-id&quot;:[&quot;S0305900698000208&quot;],&quot;URL&quot;:&quot;http:\/\/dx.doi.org\/10.1016\/s0305-9006(98)00020-8&quot;,&quot;ISSN&quot;:[&quot;0305-9006&quot;],&quot;issn-type&quot;:[{&quot;value&quot;:&quot;0305-9006&quot;,&quot;type&quot;:&quot;print&quot;}],&quot;subject&quot;:[&quot;Geography,</span></span>
<span id="cb36-39"><a href="vcr-intro.html#cb36-39"></a><span class="st">        Planning and Development&quot;]},{&quot;indexed&quot;:{&quot;date-parts&quot;:[[2017,10,23]],&quot;date-time&quot;:&quot;2017-10-23T19:27:25Z&quot;,&quot;timestamp&quot;:1508786845389},&quot;reference-count&quot;:24,&quot;publisher&quot;:&quot;Elsevier</span></span>
<span id="cb36-40"><a href="vcr-intro.html#cb36-40"></a><span class="st">        BV&quot;,&quot;issue&quot;:&quot;1&quot;,&quot;license&quot;:[{&quot;URL&quot;:&quot;http:\/\/www.elsevier.com\/tdm\/userlicense\/1.0\/&quot;,&quot;start&quot;:{&quot;date-parts&quot;:[[1999,1,1]],&quot;date-time&quot;:&quot;1999-01-01T00:00:00Z&quot;,&quot;timestamp&quot;:915148800000},&quot;delay-in-days&quot;:0,&quot;content-version&quot;:&quot;tdm&quot;}],&quot;content-domain&quot;:{&quot;domain&quot;:[],&quot;crossmark-restriction&quot;:false},&quot;short-container-title&quot;:[&quot;Powder</span></span>
<span id="cb36-41"><a href="vcr-intro.html#cb36-41"></a><span class="st">        Technology&quot;],&quot;published-print&quot;:{&quot;date-parts&quot;:[[1999,1]]},&quot;DOI&quot;:&quot;10.1016\/s0032-5910(98)00119-3&quot;,&quot;type&quot;:&quot;journal-article&quot;,&quot;created&quot;:{&quot;date-parts&quot;:[[2002,7,26]],&quot;date-time&quot;:&quot;2002-07-26T00:11:20Z&quot;,&quot;timestamp&quot;:1027642280000},&quot;page&quot;:&quot;17-30&quot;,&quot;source&quot;:&quot;Crossref&quot;,&quot;is-referenced-by-count&quot;:0,&quot;title&quot;:[&quot;Load</span></span>
<span id="cb36-42"><a href="vcr-intro.html#cb36-42"></a><span class="st">        diversion by embedding in crushed salt&quot;],&quot;prefix&quot;:&quot;10.1016&quot;,&quot;volume&quot;:&quot;101&quot;,&quot;author&quot;:[{&quot;given&quot;:&quot;W.&quot;,&quot;family&quot;:&quot;Feuser&quot;,&quot;affiliation&quot;:[]},{&quot;given&quot;:&quot;H.&quot;,&quot;family&quot;:&quot;Vijgen&quot;,&quot;affiliation&quot;:[]},{&quot;given&quot;:&quot;E.&quot;,&quot;family&quot;:&quot;Barnert&quot;,&quot;affiliation&quot;:[]}],&quot;member&quot;:&quot;78&quot;,&quot;container-title&quot;:[&quot;Powder</span></span>
<span id="cb36-43"><a href="vcr-intro.html#cb36-43"></a><span class="st">        Technology&quot;],&quot;link&quot;:[{&quot;URL&quot;:&quot;http:\/\/api.elsevier.com\/content\/article\/PII:S0032591098001193?httpAccept=text\/xml&quot;,&quot;content-type&quot;:&quot;text\/xml&quot;,&quot;content-version&quot;:&quot;vor&quot;,&quot;intended-application&quot;:&quot;text-mining&quot;},{&quot;URL&quot;:&quot;http:\/\/api.elsevier.com\/content\/article\/PII:S0032591098001193?httpAccept=text\/plain&quot;,&quot;content-type&quot;:&quot;text\/plain&quot;,&quot;content-version&quot;:&quot;vor&quot;,&quot;intended-application&quot;:&quot;text-mining&quot;}],&quot;deposited&quot;:{&quot;date-parts&quot;:[[2017,6,15]],&quot;date-time&quot;:&quot;2017-06-15T02:22:06Z&quot;,&quot;timestamp&quot;:1497493326000},&quot;score&quot;:1.0,&quot;issued&quot;:{&quot;date-parts&quot;:[[1999,1]]},&quot;references-count&quot;:24,&quot;alternative-id&quot;:[&quot;S0032591098001193&quot;],&quot;URL&quot;:&quot;http:\/\/dx.doi.org\/10.1016\/s0032-5910(98)00119-3&quot;,&quot;ISSN&quot;:[&quot;0032-5910&quot;],&quot;issn-type&quot;:[{&quot;value&quot;:&quot;0032-5910&quot;,&quot;type&quot;:&quot;print&quot;}],&quot;subject&quot;:[&quot;General</span></span>
<span id="cb36-44"><a href="vcr-intro.html#cb36-44"></a><span class="st">        Chemical Engineering&quot;]}],&quot;items-per-page&quot;:3,&quot;query&quot;:{&quot;start-index&quot;:0,&quot;search-terms&quot;:null}}}&#39;</span></span>
<span id="cb36-45"><a href="vcr-intro.html#cb36-45"></a><span class="at">  </span><span class="fu">recorded_at</span><span class="kw">:</span><span class="at"> 2018-04-28 15:12:29 GMT</span></span>
<span id="cb36-46"><a href="vcr-intro.html#cb36-46"></a><span class="at">  </span><span class="fu">recorded_with</span><span class="kw">:</span><span class="at"> vcr/0.0.8.9521, webmockr/0.2.2.9119, crul/0.5.2</span></span></code></pre></div>
<p>All components of both the request and response are preserved, so that the HTTP client (in this case <code>crul</code>) can reconstruct its own response just as it would if it wasnât using <code>vcr</code>.</p>
</div>
<div id="vcr-enabled-testing" class="section level2" number="7.4">
<h2><span class="header-section-number">7.4</span> vcr enabled testing</h2>
<div id="check-vs-test" class="section level3" number="7.4.1">
<h3><span class="header-section-number">7.4.1</span> check vs.Â test</h3>
<blockquote>
<p>TLDR: Run <code>devtools::test()</code> before running <code>devtools::check()</code></p>
</blockquote>
<p>When running tests or checks of your whole package, note that youâll get different results with
<code>devtools::check()</code> vs.Â <code>devtools::test()</code>. This arises because <code>devtools::check()</code> runs in a
temporary directory and files created (vcr cassettes) are only in that temporary directory and
thus donât persist after <code>devtools::check()</code> exits.</p>
<p>However, <code>devtools::test()</code> does not run in a temporary directory, so files created (vcr
cassettes) are in whatever directory youâre running it in.</p>
<p>Alternatively, you can run <code>devtools::test_file()</code> to create your vcr cassettes.</p>
<p>The same goes for using the RStudio IDE buttons/keyboard shortcuts.</p>
</div>
<div id="vcr-enabled-tests-on-cran" class="section level3" number="7.4.2">
<h3><span class="header-section-number">7.4.2</span> CRAN</h3>
<p>There is no one right answer to how to manage your tests for CRAN. The following is a
discussion of the various considerations - which should give the reader enough
information to make an educated decision.</p>
<p>You can run vcr enabled tests on CRAN. CRAN is okay with files associated with tests,
and so in general you can run your vcr enabled tests on CRAN just as you run them
locally.</p>
<p>If you do run your vcr enabled tests on CRAN be aware of a few things:</p>
<ul>
<li>If your vcr enabled tests require any environment variables or R options,
they wonât be available on CRAN. In these cases you likely want to skip these
tests.</li>
<li>If your vcr enabled tests have cassettes with sensitive information in them,
you probably do not want to have those cassettes on the internet, in which case
you wonât be running vcr enabled tests on CRAN either. In the case of sensitive
information, youâll want to read the <a href="managing-cassettes.html#gitignore-cassettes">gitignore cassettes</a>
section</li>
</ul>
<p>If you are worried at all about problems with vcr enabled tests on CRAN you can use
<code>testthat::skip_on_cran()</code> to skip specific tests.</p>
</div>
<div id="vcr-ci" class="section level3" number="7.4.3">
<h3><span class="header-section-number">7.4.3</span> CI sites: Travis, Appveyor, etc.</h3>
<p>Similar considerations are involved when dealing with Travis, Appveyor, Circle-CI,
etc.</p>
<p>There are a few differences. With CI services you can manage environment variables
so you can run tests that require API keys, etc. In addition, if tests fail you
arenât threatened with your package being taken down.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="webmockr-utilities.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="vcr-usage.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ropensci-books/http-testing/edit/master/07-vcr.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["main.pdf", "main.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
